{"version":3,"file":"static/webpack/static/development/pages/companies/[id].js.21ca90466f11079c5f75.hot-update.js","sources":["webpack:///./src/pages/companies/.tsx"],"sourcesContent":["import React from 'react';\n\nimport CompanyProfile from '../../components/Company';\n\nconst getCompanyFromLocalStorage = (companyId) => {\n  let favorites = {};\n  const data = localStorage.getItem('companies');\n  if (data) {\n    try {\n      favorites = JSON.parse(data);\n    } catch(e) {\n      console.error('currupted local storage: it should contain a json');\n    }\n  }\n  return favorites[companyId] || {};\n}\n\nconst Company = ({ company }) => {\n  const [isFavorite, setFavorite] = React.useState(getCompanyFromLocalStorage(company.id).isFavorite);\n  const handleToggleFavorite = () => setFavorite(!isFavorite);\n  React.useEffect(() => {\n    let favorites = {};\n    const data = localStorage.getItem('companies');\n    if (data) {\n      try {\n        favorites = JSON.parse(data);\n      } catch(e) {\n        console.error('currupted local storage: it should contain a json');\n      }\n    }\n    const currentItem = favorites[company.id] || {};\n    currentItem['isFavorite'] = isFavorite;\n    favorites[company.id] = currentItem;\n    localStorage.setItem('companies', JSON.stringify(favorites));\n  }, [isFavorite])\n  return <CompanyProfile company={company} isFavorite={isFavorite} onToggleFavorite={handleToggleFavorite} />\n}\n\n// Company page is pre-rendered at compile time for SEO\n// see https://nextjs.org/docs/basic-features/pages\n\nexport async function getStaticPaths() {\n  const localDataFolder = process.env.localDataFolder;\n  let companies = require(`../../../${localDataFolder}/companies.json`);\n  let paths = companies.map(company => `/companies/${company.id}`);\n\n  // We'll pre-render only these paths at build time.\n  // { fallback: false } means other routes should 404.\n  return { paths, fallback: false }\n}\n\nexport async function getStaticProps({ params }) {\n  const localDataFolder = process.env.localDataFolder;\n  let companies = require(`../../../${localDataFolder}/companies.json`);\n  const companyId = params.id;\n  let company = companies.find(company => company.id === companyId);\n\n  // Pass post data to the page via props\n  return { props: { company } }\n}\n\nexport default Company"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;;AAoBA;;;;A","sourceRoot":""}